{% extends "base.html" %}
{% block content %}
<style>
  .error {
    color: red;
  }

  .is-countdown {
    border: unset;
    background-color: unset;
  }

  .countdown-show3 {
    padding: 0;
  }

  .countdown-show3 .countdown-section {
    width: 30% !important;
  }
  .container-xl {
    padding-left:0;
    padding-right:0;
  }

  /* Custom Countdown */
  .countdown-section {
    text-align: left;
  }

  .countdown-period {
    display: unset;
    padding-left: 2px;
  }

  .countdown-show3 .countdown-section {
    width:20% !important;
  }

  .countdown-section:nth-child(1) {
    width:20% !important;
  }

</style>
<div class="page-wrapper" x-data="dashboard" x-cloak>
  <div class="container-xl">
    <!-- Page title -->
    <div class="page-header d-print-none">
      <div class="alert alert-success" id="backup_done" style="display:none;">
        Backup done ✔
      </div>
      <div id="backup_loading" style="display:none;">
        <div class="mb-1 text-muted">
          Backup On Progress (<span id="backup_loading_backup_name"></span>)
        </div>
        <div class="progress progress-md mb-3" >
          <div class="progress-bar progress-bar-indeterminate"></div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <!-- Page pre-title -->
          <div class="page-pretitle">
            Overview
          </div>
          <h2 class="page-title">
            Dashboard
          </h2>
        </div>
        <div class="col-auto ms-auto d-print-none" style="width: {{ 'auto' if not session['need_update'] else '50%'}};height:1em;">
          <div class="text-end page-pretitle">
            Server Time
          </div>
          <h2 class="page-title">
            00:00:00
          </h2>
          </div>
      </div>
    </div>
  </div>
  <div class="page-body">
    <div class="container-xl">
      <div class="row">
        <div class="col-4">
          <div class="row row-cols-2 row-deck row-cards">
            <div class="col col-sm">
              <div class="card">
                <div class="card-body">
                  <div class="p-1">
                    <img src="{{ url_for('static', filename='img/logo-bqckup.png') }}" alt="">
                  </div>
                  <div class="text-center mt-2">
                    Version: 1.0.0
                  </div>
                </div>
              </div>
            </div>
            <div class="col col-sm">
              <div class="card">
                <div class="empty">
                  <svg xmlns="http://www.w3.org/2000/svg"  style="--tblr-icon-size: 4rem;" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <ellipse cx="12" cy="6" rx="8" ry="3"></ellipse>
                    <path d="M4 6v6a8 3 0 0 0 16 0v-6"></path>
                    <path d="M4 12v6a8 3 0 0 0 16 0v-6"></path>
                 </svg>
                  <div class="empty-action">
                    <a href="{{ url_for('bqckup.view_add') }}" class="btn btn-primary">
                      Add Bqckup
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col">
              <div class="card">
                <div class="card-header">
                  <h2 class="card-title">
                    Storage Information
                  </h2>
                </div>
                <div class="card-body">
                  <div class="datagrid">
                    <div class="datagrid-item">
                      <div class="datagrid-title">Server Storage</div>
                      <div class="datagrid-content">{{ server_storage['used'] }} / {{ server_storage['total'] }} (GB)</div>
                      <div class="progress mt-2">
                        <div class="progress-bar" style="width: {{ (server_storage['used'] / server_storage['total']) * 100 }}%" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100" aria-label="38% Complete">
                          <span class="visually-hidden">38% Complete</span>
                        </div>
                      </div>
                    </div>
                    <div class="datagrid-item">
                      <div class="datagrid-title text-start">
                          Cloud Storage
                          <div class="float-end">
                            <span class="form-help" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="Hint: We suggest you to set the limit for your cloud storage, so bqckup will give you a warning when it's almost exceed">?</span>
                          </div>
                      </div>
                      <div class="datagrid-content">100 / ∞</div>
                      <div class="progress mt-2">
                        <div class="progress-bar" style="width: 100%" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100" aria-label="38% Complete">
                          <span class="visually-hidden">38% Complete</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>      
        </div>
        <div class="col">
          <div class="card">
            <div class="card-header">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <polyline points="12 8 12 12 14 14"></polyline>
                <path d="M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5"></path>
             </svg>
              <h2 class="card-title">
                Recent Activity
              </h2>
            </div>
            <div class="card-table">
              <table class="table table-vcenter">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Size</th>
                    <th>Storage</th>
                    <th>Last Run</th>
                    <th>Next Run</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="d-flex align-items-center">
                        <span class="status-indicator status-green">
                          <span class="status-indicator-circle"></span>
                        </span>
                        <div>
                          OJTBackup
                        </div>
                      </div>
                  </td>
                    <td>100 GB</td>
                    <td>ojtbackup</td>
                    <td>
                      1 Hours Ago
                    </td>
                    <td>
                      in 2 Hours
                    </td>
                    <td>
                      <div class="dropdown">
                        <a href="#" class="btn-action" data-bs-toggle="dropdown" aria-expanded="false">
                          <!-- Download SVG icon from http://tabler-icons.io/i/dots-vertical -->
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-settings" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                         </svg>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end">
                          <span class="dropdown-header">Actions</span>
                          <a class="dropdown-item" href="javascript:void(0)">
                            <!-- Download SVG icon from http://tabler-icons.io/i/settings -->
                            <!-- <svg xmlns="http://www.w3.org/2000/svg" class="icon dropdown-item-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"></path><circle cx="12" cy="12" r="3"></circle></svg> -->
                            Backup now
                          </a>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="empty" x-show="false">
              <div class="empty-img">
                <img src="{{ url_for('static', filename='illustrations/undraw_quitting_time_dm8t.svg') }}" height="128" alt="">
              </div>
              <p class="empty-title">No Bqckup Found</p>
              <p class="empty-subtitle text-muted">
                You just need simply add bqckup by clicking this button (not good)
              </p>
              <div class="empty-action">
                <a href="{{ url_for('bqckup.view_add') }}" class="btn btn-primary">
                  <!-- Download SVG icon from http://tabler-icons.io/i/search -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                 </svg>
                  Create your first Bqckup
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block script %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
